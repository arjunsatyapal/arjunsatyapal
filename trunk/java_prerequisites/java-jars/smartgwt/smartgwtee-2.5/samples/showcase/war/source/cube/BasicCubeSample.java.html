<html>
<head>
<link rel='stylesheet' href='../../js/sh/SyntaxHighlighter.css' type='text/css' />
<script src='../../js/sh/shCore.js'></script>
<script src='../../js/sh/shBrushJava.js'></script>
<style>
* {
font-family:Courier New,monospace;
  padding: 0;
  margin: 0;
  white-space: nowrap;
  font-size: 11px;
}
.dp-highlighter {
  white-space: nowrap;
  overflow: visible;
  width: 600px;
  font-size: 11px;
  font-family:Courier New,monospace;
}
</style>
</head>
<body>
<textarea name='code' class='java:nogutter' rows='15' cols='120'>
package com.smartgwt.sample.showcase.client.cube;

import com.google.gwt.i18n.client.NumberFormat;
import com.smartgwt.client.util.SC;
import com.smartgwt.client.widgets.Canvas;
import com.smartgwt.client.widgets.HTMLFlow;
import com.smartgwt.client.widgets.cube.CubeGrid;
import com.smartgwt.client.widgets.grid.CellFormatter;
import com.smartgwt.client.widgets.grid.ListGridRecord;

import com.google.gwt.core.client.EntryPoint;

public class BasicCubeSample implements EntryPoint {

    public void onModuleLoad() {
        Canvas topCanvas=null;
        if(SC.hasAnalytics()) {
            CubeGrid cubeGrid = new CubeGrid();
            //in order to enable charting, the Drawing module must be present
            if(SC.hasDrawing()) {
                cubeGrid.setEnableCharting(true);
            }
            cubeGrid.setData(ProductRevenueData.getData());

            cubeGrid.setWidth100();
            cubeGrid.setHeight100();
            cubeGrid.setHideEmptyFacetValues(true);
            cubeGrid.setShowCellContextMenus(true);

            final NumberFormat numberFormat = NumberFormat.getFormat("0,000");

            cubeGrid.setCellFormatter(new CellFormatter() {
                public String format(Object value, ListGridRecord record, int rowNum, int colNum) {
                    if (value == null) return null;
                    try {
                        return numberFormat.format(((Number) value).longValue());
                    } catch (Exception e) {
                        return value.toString();
                    }
                }
            });

            cubeGrid.setColumnFacets("quarter", "month", "metric");
            cubeGrid.setRowFacets("region", "product");

            topCanvas = cubeGrid;
        } else {
            HTMLFlow htmlFlow = new HTMLFlow("<div class='explorerCheckErrorMessage'><p>This example is disabled in this SDK because it requires the optional " +
            "<a href=\"http://www.smartclient.com/product/index.jsp\" target=\"_blank\">Analytics module</a>.</p>" +
            "<p>Click <a href=\"http://www.smartclient.com/smartgwtee/showcase/#cube-basic\" target=\"\">here</a> to see this example on smartclient.com</p></div>");
            htmlFlow.setWidth100();
            topCanvas = htmlFlow;
        }
        topCanvas.draw();
    }

}
</textarea>
<script class='javascript'>
dp.SyntaxHighlighter.HighlightAll("code");
</script>
</body>
</html>
